!function(t,e){"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?module.exports=e(require("angular")):t.returnExports=e(t.angular)}(this,function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}return t.module("bgotink.customElements",[]).provider("customElementSettings",function(){var t={attributeToEvent:function(t){return t+"-changed"},eventToAttribute:function(t){return t.substring(0,event.type.lastIndexOf("-changed"))}};this.setAttributeToEventMapper=function(e){t.attributeToEvent=e},this.setEventToAttributeMapper=function(e){t.eventToAttribute=e},this.$get=function(){return Object.assign({},t)}}).directive("bindCe",["$parse","$interpolate","customElementSettings",function(n,r,i){function o(e,n,r,i){t.isArray(i)?i=i.slice(0):t.isObject(i)&&(i=Object.assign({},i)),r in e?e[r]=i:e.setAttribute(n,i)}function a(t,e,n){return n in t?t[n]:t.getAttribute(e)}function u(t){return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}function c(t,e){return t.slice(0,e.length)===e}function s(t,e){var n=e.length;return t.charAt(n).toLocaleLowerCase()+t.slice(n+1)}var l=Object.prototype.hasOwnProperty;return{restrict:"A",scope:!1,priority:500,terminal:!0,transclude:"element",compile:function(f,v){var d={};for(var g in v)if(l.call(v,g)&&g.match(/^ce[A-Z]/)){var b=v[g];g=s(g,"ce");var p=b.match(/\{\{\s*[\.\w]+\s*\}\}/),y=!1,h=!1,A=!1;c(g,"bindOn")?(y=!0,h=!0,A=!0,g=s(g,"bindOn")):c(g,"bind")?(y=!0,g=s(g,"bind")):c(g,"on")&&(h=!0,g=s(g,"on"));var m=void 0;m=p?r(b):n(b);var w=m.assign;if(h&&!t.isFunction(w))throw new TypeError("Cannot write to "+b);d[g]={getter:m,setter:w,bind:y,listen:h,twoWayBind:A}}return console.log(d),function(n,r,c,s,f){function v(o){var u=i.eventToAttribute(o.type),s=c.$normalize(u);if(console.log("two way bind listen "+s),l.call(d,s)){var f=o.detail.value;if(o.detail.path&&(f=a(r[0],u,s)),l.call(b,s)&&b[s])return void(b[s]={newValue:f});var v=d[s].getter,g=d[s].setter;b[s]={newValue:f},n.$evalAsync(function(){var r=v(n),i=b[s].newValue;b[s]=null,t.equals(r,i)||(t.isArray(r)?(r.length=0,r.push.apply(r,e(i))):t.isObject(r)?Object.assign(r,i):g(n,i))})}}function g(t){var e=i.eventToAttribute(t.type),r=c.$normalize(e);console.log("listen "+r),n.$evalAsync(d[r].getter,{$event:t})}var b={},p=function(e){if(!d[e].bind)return"continue";var i=d[e].getter,c=d[e].setter||t.noop,s=u(e);n.$watch(i,function(i,u){console.log("watch "+e);var l=i===u,f=a(r[0],s,e);return l&&t.isUndefined(i)&&!t.isUndefined(f)?void c(n,f):void(t.equals(i,f)||o(r[0],s,e,i))},!0)};for(var y in d){p(y)}var h=f(n);r.replaceWith(h),r=h;var A={};for(var m in d)if(d[m].listen){var w=void 0,E=void 0;d[m].twoWayBind?(w=i.attributeToEvent(u(m)),E=v):(w=u(m),E=g),A[w]=E,r.on(w,E)}n.$on("$destroy",function(){for(var t in A)r.off(t,A[t]),A[t]=null}),console.log(A)}}}}]),"bgotink.customElements"});
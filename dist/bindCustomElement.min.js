!function(t,e){"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?module.exports=e(require("angular")):t.returnExports=e(t.angular)}(this,function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}return t.module("bgotink.customElements",[]).provider("customElementSettings",function(){var t={attributeToEvent:function(t){return t+"-changed"},eventToAttribute:function(t){return t.substring(0,event.type.lastIndexOf("-changed"))}};this.setAttributeToEventMapper=function(e){t.attributeToEvent=e},this.setEventToAttributeMapper=function(e){t.eventToAttribute=e},this.$get=function(){return Object.assign({},t)}}).directive("bindCe",["$parse","$interpolate","customElementSettings",function(n,r,i){function o(e,n,r,i){t.isArray(i)?i=i.slice(0):t.isObject(i)&&(i=Object.assign({},i)),r in e?e[r]=i:e.setAttribute(n,i)}function a(t,e,n){return n in t?t[n]:t.getAttribute(e)}function u(t){return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}function c(t,e){var n=e.length;return t.charAt(n).toLocaleLowerCase()+t.slice(n+1)}var s=Object.prototype.hasOwnProperty;return{restrict:"A",scope:!1,priority:500,terminal:!0,transclude:"element",compile:function(l,f){var v={};for(var d in f)if(s.call(f,d)&&d.match(/^ce[A-Z]/)){var g=f[d];d=c(d,"ce");var p=g.match(/\{\{\s*[\.\w]+\s*\}\}/),b=!1,h=!1,m=!1;d.match(/^bindOn[A-Z]/)?(b=!0,h=!0,m=!0,d=c(d,"bindOn")):d.match(/^bind[A-Z]/)?(b=!0,d=c(d,"bind")):d.match(/^on[A-Z]/)&&(h=!0,d=c(d,"on"));var y=void 0;y=p?r(g):n(g);var A=y.assign;if(m&&!t.isFunction(A))throw new TypeError("Cannot write to "+g);v[d]={getter:y,setter:A,bind:b,listen:h,twoWayBind:m}}return console.log(v),function(n,r,c,l,f){function d(o){var u=i.eventToAttribute(o.type),l=c.$normalize(u);if(console.log("two way bind listen "+l),s.call(v,l)){var f=o.detail.value;if(o.detail.path&&(f=a(r[0],u,l)),s.call(p,l)&&p[l])return void(p[l]={newValue:f});var d=v[l].getter,g=v[l].setter;p[l]={newValue:f},n.$evalAsync(function(){var r=d(n),i=p[l].newValue;p[l]=null,t.equals(r,i)||(t.isArray(r)?(r.length=0,r.push.apply(r,e(i))):t.isObject(r)?Object.assign(r,i):g(n,i))})}}function g(t){var e=c.$normalize(t.type);console.log("listen "+e),n.$evalAsync(function(){return v[e].getter(n,{$event:t})})}var p={},b=function(e){if(!v[e].bind)return"continue";var i=v[e].getter,c=v[e].setter||t.noop,s=u(e);n.$watch(i,function(i,u){console.log("watch "+e);var l=i===u,f=a(r[0],s,e);return l&&t.isUndefined(i)&&!t.isUndefined(f)?void c(n,f):void(t.equals(i,f)||o(r[0],s,e,i))},!0)};for(var h in v){b(h)}var m=f(n);r.replaceWith(m),r=m;var y={};for(var A in v)if(v[A].listen){var w=void 0,E=void 0;v[A].twoWayBind?(w=i.attributeToEvent(u(A)),E=d):(w=u(A),E=g),y[w]=E,r.on(w,E)}n.$on("$destroy",function(){for(var t in y)r.off(t,y[t]),y[t]=null}),console.log(y)}}}}]),"bgotink.customElements"});